<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>글 작성 화면</title>
    <style>
        .form-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .form-group {
            margin-bottom: 10px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input[type="text"],
        textarea,
        input[type="file"] {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .form-group button,
        .form-group a.button {
            display: inline-block;
            padding: 10px 15px;
            font-size: 16px;
            border: none;
            border-radius: 4px;
            color: white;
            background-color: #007bff;
            text-decoration: none; /* Remove underline from links */
            cursor: pointer;
            margin-right: 10px;
        }
        .form-group a.button { /* Additional styles to make <a> look like a button */
            border: 1px solid #007bff;
            text-align: center;
        }
        .form-group a.button:hover {
            background-color: #0056b3;
        }
        .form-group button[type="submit"] {
            background-color: #28a745;
        }
        .form-group button[type="submit"]:hover {
            background-color: #218838;
        }
    </style>
    <script>
        // 파일 유형을 검사하는 자바스크립트 함수
        function validateFile() {
            var fileInput = document.getElementById('id_image');
            var filePath = fileInput.value;
            var allowedExtensions = /(\.jpg|\.jpeg|\.png)$/i;
            if (!allowedExtensions.exec(filePath) && filePath) {
                alert('JPG, JPEG, PNG 파일만 업로드 가능합니다.');
                fileInput.value = ''; // 입력을 초기화
                return false; // 폼 제출을 방지
            }
            return true; // 폼 제출을 허용
        }
    </script>
</head>
<body>
    <div class="form-container">
        <h1>맛집 커뮤니티✨</h1>
        <form method="post" enctype="multipart/form-data" onchange="validateFile()">
            {% csrf_token %}
            {{ form.as_p }}

            {% comment %}
            <div class="form-group">
                <label for="id_title">제목</label>
                {{ form.title }}                        <!--{{ form.title }}-->
            </div>
            <div class="form-group">
                <label for="id_content">내용</label>
                {{ form.content }}                          <!--{{ form.content }}-->
            </div>
            <div class="form-group">
                <label for="id_image">파일 업로드</label>
                {{ form.as_p }}                            <!--{{ form.image }}-->
            </div>
            {% endcomment %}

            {% comment %}
            <div class="form-group">
                <label for="id_tag">음식 카테고리</label>
                <select name="tag" id="id_tag">
                    {% for category in categories %}
                    <option value="{{ category.id }}">{{ category.name }}</option>
                    {% endfor %}
                </select>
            </div>
            {% endcomment %}

            
            <div class="form-group">
                <label for="id_category">음식 카테고리</label>
                <select name="category" id="id_category">
                    {% for category in categories %}
                    <option value="{{ category.id }}">{{ category.name }}</option>
                    {% endfor %}
                </select>
            </div>
            


            <div class="form-group">
                <button type="submit">게시하기</button>
                <a href="{% url 'loginok' %}" class="button">메인화면</a>
            </div>
        </form>
    </div>
</body>
</html>